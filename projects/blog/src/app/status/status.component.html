<ng-container *ngIf="status$ | async as status">
  <mat-progress-bar *ngIf="status === null" mode="buffer" color="warn"></mat-progress-bar>
  <mat-progress-bar *ngIf="status.type === 'progress'" mode="determinate" color="warn" [value]="status.value">
  </mat-progress-bar>
  <mat-progress-bar *ngIf="status.type === 'query'" mode="query" color="warn"></mat-progress-bar>
  <mat-progress-bar *ngIf="status.type === 'idle'" mode="determinate" color="accent" [value]="100"></mat-progress-bar>
</ng-container>
